<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="filename" content="flower-shop-vibe.html">
    <title>FLWR. | –ú–∞–≥–∞–∑–∏–Ω —Ü–≤–µ—Ç–æ–≤</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;800&family=Space+Grotesk:wght@300;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            white: '#FFFFFF',
                            bg: '#FAFAFA',
                            lime: '#CCFF00', // Acid Lime
                            pink: '#FF0099', // Hot Pink
                            black: '#111111'
                        }
                    },
                    spacing: {
                        '1440': '1440px',
                    },
                    screens: {
                        'xs': '375px',
                        '3xl': '1920px',
                        '4xl': '2560px',
                    }
                }
            }
        }
    </script>

    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ */
        body {
            background-color: #F0F0F0;
            margin: 0;
            overflow-x: hidden;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
        }

        #app-container {
            width: 100%;
            max-width: 1440px;
            background-color: #FFFFFF;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.05);
            margin: 0 auto;
        }

        /* –î–ª—è –±–æ–ª—å—à–∏—Ö –º–æ–Ω–∏—Ç–æ—Ä–æ–≤ (4K –∏ –±–æ–ª—å—à–µ) */
        @media (min-width: 1920px) {
            #app-container {
                max-width: 1600px;
                margin: 0 auto;
            }
        }

        @media (min-width: 2560px) {
            #app-container {
                max-width: 1800px;
                margin: 0 auto;
            }
            
            .text-8xl { font-size: 6rem; line-height: 1; }
            .text-6xl { font-size: 4.5rem; }
            .text-5xl { font-size: 3.5rem; }
            .text-4xl { font-size: 3rem; }
            .text-3xl { font-size: 2.5rem; }
            .text-2xl { font-size: 2rem; }
            .text-xl { font-size: 1.5rem; }
        }

        /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 320px) {
            .text-4xl { font-size: 2rem; }
            .text-3xl { font-size: 1.75rem; }
            .text-2xl { font-size: 1.5rem; }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞–¥–∞—é—â–∏—Ö —Ü–≤–µ—Ç–æ–≤ - –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è */
        .falling-element {
            position: absolute;
            top: -100px;
            pointer-events: none;
            z-index: 0;
            animation: fall linear infinite;
            opacity: 0.4;
            will-change: transform, opacity;
        }

        /* –ú–µ–Ω—å—à–µ —Ü–≤–µ—Ç–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
        @media (max-width: 768px) {
            .falling-element {
                font-size: 16px !important;
                animation-duration: 4s !important;
            }
        }

        @keyframes fall {
            0% {
                transform: translateY(0) rotate(0deg) translateX(0);
                opacity: 0;
            }
            5% { opacity: 0.4; }
            50% { transform: translateY(50vh) rotate(180deg) translateX(20px); }
            95% { opacity: 0.4; }
            100% {
                transform: translateY(100vh) rotate(360deg) translateX(-20px);
                opacity: 0;
            }
        }

        /* Preloader - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π */
        #loader {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: #fff;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s ease;
        }
        
        .flower-spinner {
            font-size: 60px;
            animation: spin 2s linear infinite;
        }

        @media (max-width: 768px) {
            .flower-spinner {
                font-size: 40px;
            }
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #111; border-radius: 10px; }

        /* Glassmorphism Classes */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .content-z { z-index: 10; position: relative; }
        
        /* –§–æ–Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .bg-falling-container {
            position: absolute;
            inset: 0;
            pointer-events: none;
            height: 100%;
            width: 100%;
            z-index: 0;
            overflow: hidden;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è fadeIn */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É */
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .bounce-animation {
            animation: bounce 0.3s ease-in-out;
        }

        /* –ë—É—Ä–≥–µ—Ä –º–µ–Ω—é */
        .burger-menu {
            width: 30px;
            height: 20px;
            position: relative;
            cursor: pointer;
        }

        .burger-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: #111;
            transition: all 0.3s ease;
        }

        .burger-line:nth-child(1) { top: 0; }
        .burger-line:nth-child(2) { top: 9px; }
        .burger-line:nth-child(3) { top: 18px; }

        .burger-menu.active .burger-line:nth-child(1) {
            transform: rotate(45deg);
            top: 9px;
        }

        .burger-menu.active .burger-line:nth-child(2) {
            opacity: 0;
        }

        .burger-menu.active .burger-line:nth-child(3) {
            transform: rotate(-45deg);
            top: 9px;
        }

        /* –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 320px;
            height: 100vh;
            background: white;
            z-index: 999;
            transition: right 0.3s ease;
            box-shadow: -10px 0 30px rgba(0,0,0,0.1);
        }

        .mobile-menu.open {
            right: 0;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ */
        .responsive-heading {
            font-size: clamp(2.5rem, 5vw, 6rem);
            line-height: 1.1;
        }

        .responsive-subheading {
            font-size: clamp(1.5rem, 3vw, 3rem);
            line-height: 1.2;
        }

        /* Touch-friendly —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 768px) {
            button, a, input, select {
                min-height: 44px;
                min-width: 44px;
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
        .responsive-padding {
            padding-left: clamp(1rem, 5vw, 3rem);
            padding-right: clamp(1rem, 5vw, 3rem);
        }
    </style>
</head>
<body class="text-brand-black antialiased">

    <!-- PRELOADER -->
    <div id="loader">
        <div class="text-center">
            <div class="flower-spinner">üå∏</div>
            <p class="mt-4 font-bold tracking-widest text-sm uppercase">Loading...</p>
        </div>
    </div>

    <!-- –ú–û–ë–ò–õ–¨–ù–û–ï –ú–ï–ù–Æ -->
    <div id="mobile-menu" class="mobile-menu pt-20 px-6">
        <div class="flex flex-col gap-6">
            <a href="#catalog" class="text-2xl font-bold hover:text-brand-pink transition-colors" onclick="closeMobileMenu()">–ë—É–∫–µ—Ç—ã</a>
            <a href="#delivery" class="text-2xl font-bold hover:text-brand-pink transition-colors" onclick="closeMobileMenu()">–î–æ—Å—Ç–∞–≤–∫–∞</a>
            <a href="#" class="text-2xl font-bold hover:text-brand-pink transition-colors" onclick="closeMobileMenu()">–û –Ω–∞—Å</a>
            <div class="pt-6 border-t border-gray-200 mt-6">
                <button onclick="checkAdmin()" class="w-full py-3 rounded-xl border-2 border-black font-bold mb-3">
                    –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN CONTAINER -->
    <main id="app-container">
        
        <!-- FALLING BACKGROUND (JS Injected) -->
        <div id="falling-bg-container" class="bg-falling-container"></div>

        <!-- NAVIGATION -->
        <nav class="sticky top-0 z-50 responsive-padding py-4 md:py-6 bg-white/80 backdrop-blur-sm">
            <div class="glass rounded-full px-4 md:px-8 py-3 md:py-4 flex justify-between items-center shadow-sm">
                <div class="flex items-center gap-2 group cursor-pointer" onclick="switchView('home')">
                    <div class="w-8 h-8 md:w-10 md:h-10 bg-brand-lime rounded-full flex items-center justify-center text-lg md:text-xl border-2 border-black group-hover:rotate-12 transition-transform">üåº</div>
                    <span class="font-display font-bold text-xl md:text-2xl tracking-tighter">FLWR<span class="text-brand-pink">.</span></span>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex gap-6 lg:gap-10 font-medium text-sm uppercase tracking-wide">
                    <a href="#catalog" class="hover:text-brand-pink transition-colors">–ë—É–∫–µ—Ç—ã</a>
                    <a href="#delivery" class="hover:text-brand-pink transition-colors">–î–æ—Å—Ç–∞–≤–∫–∞</a>
                    <a href="#" class="hover:text-brand-pink transition-colors">–û –Ω–∞—Å</a>
                </div>

                <div class="flex items-center gap-3 md:gap-4">
                    <button onclick="checkAdmin()" id="admin-btn" class="hidden md:block px-4 md:px-5 py-2 rounded-full border border-black font-bold text-xs hover:bg-black hover:text-white transition-all uppercase">
                        Admin
                    </button>
                    <div class="relative cursor-pointer" onclick="openCartModal()">
                        <i class="fa-solid fa-bag-shopping text-lg md:text-xl"></i>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-brand-pink text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold">0</span>
                    </div>
                    <!-- Mobile Burger Menu -->
                    <div class="md:hidden">
                        <div id="burger-btn" class="burger-menu" onclick="toggleMobileMenu()">
                            <div class="burger-line"></div>
                            <div class="burger-line"></div>
                            <div class="burger-line"></div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- VIEW: CUSTOMER (SHOP) -->
        <div id="view-shop" class="content-z pb-12 md:pb-20">
            
            <!-- HERO SECTION -->
            <header class="responsive-padding mt-6 md:mt-8 mb-12 md:mb-20">
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8 items-center bg-[#F4F4F4] rounded-3xl md:rounded-[3rem] p-6 md:p-12 relative overflow-hidden">
                    <!-- Decor element -->
                    <div class="absolute top-0 right-0 w-32 h-32 md:w-64 md:h-64 bg-brand-lime opacity-30 md:opacity-50 blur-[50px] md:blur-[100px] rounded-full"></div>
                    
                    <div class="lg:col-span-7 relative z-10 order-2 lg:order-1 mt-6 lg:mt-0">
                        <div class="inline-block bg-white px-3 md:px-4 py-1 md:py-2 rounded-full border border-gray-200 mb-4 md:mb-6 shadow-sm">
                            <span class="text-brand-pink font-bold text-sm md:text-base">‚ú® New Collection</span> <span class="text-gray-400">|</span> 2026
                        </div>
                        <h1 class="font-display font-black text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl leading-[0.9] mb-6 md:mb-8 uppercase">
                            –¶–≤–µ—Ç—ã <br>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-lime to-green-600 drop-shadow-sm">vibe</span> check
                        </h1>
                        <p class="text-base md:text-lg lg:text-xl text-gray-600 mb-6 md:mb-10 max-w-md font-light">–î–æ—Å—Ç–∞–≤–ª—è–µ–º —ç—Å—Ç–µ—Ç–∏–∫—É –∏ —ç–º–æ—Ü–∏–∏. –°–æ–±–µ—Ä–∏ —Å–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –±—É–∫–µ—Ç –∑–∞ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤.</p>
                        <a href="#catalog" class="inline-flex items-center gap-2 md:gap-3 bg-black text-white px-6 md:px-10 py-3 md:py-5 rounded-full font-bold text-base md:text-lg hover:bg-brand-pink hover:scale-105 transition-all duration-300">
                            –í—ã–±—Ä–∞—Ç—å –±—É–∫–µ—Ç <i class="fa-solid fa-arrow-right -rotate-45"></i>
                        </a>
                    </div>
                    <div class="lg:col-span-5 h-[300px] sm:h-[400px] md:h-[500px] relative order-1 lg:order-2">
                        <img src="https://avatars.mds.yandex.net/get-eda/14921544/89fe18c62e34b12fd845a46fd20f9868/orig" 
                             alt="Fancy Flowers" 
                             class="w-full h-full object-cover rounded-2xl md:rounded-[2rem] border-4 border-white shadow-xl rotate-0 lg:rotate-3 hover:rotate-0 transition-transform duration-500">
                        
                        <!-- Floating Sticker -->
                        <div class="absolute -bottom-4 -left-4 md:-bottom-6 md:-left-6 bg-white p-3 md:p-4 rounded-xl md:rounded-2xl shadow-lg flex items-center gap-2 md:gap-3 animate-bounce" style="animation-duration: 3s;">
                            <div class="bg-brand-lime w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold text-lg md:text-xl">üöÄ</div>
                            <div>
                                <p class="text-xs md:text-xs text-gray-400 font-bold uppercase">–î–æ—Å—Ç–∞–≤–∫–∞</p>
                                <p class="font-black text-base md:text-lg">~60 –º–∏–Ω</p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- DELIVERY SECTION -->
            <section id="delivery" class="responsive-padding mb-12 md:mb-24 relative">
                <div class="text-center mb-8 md:mb-16">
                    <h2 class="font-display font-bold text-3xl md:text-4xl lg:text-5xl uppercase mb-4">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
                    <p class="text-gray-500 text-base md:text-lg">–ü—Ä–æ—â–µ, —á–µ–º –∑–∞–∫–∞–∑–∞—Ç—å —Ç–∞–∫—Å–∏</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <!-- Step 1 -->
                    <div class="bg-white border border-gray-100 p-6 md:p-8 rounded-2xl md:rounded-[2rem] hover:shadow-2xl hover:shadow-brand-lime/20 transition-all hover:-translate-y-2 group">
                        <div class="w-12 h-12 md:w-16 md:h-16 bg-gray-50 rounded-full flex items-center justify-center text-2xl md:text-3xl group-hover:bg-brand-lime group-hover:scale-110 transition-all mb-4 md:mb-6">
                            üëÄ
                        </div>
                        <h3 class="font-bold text-xl md:text-2xl mb-2 md:mb-3">1. –í—ã–±–∏—Ä–∞–µ—à—å</h3>
                        <p class="text-gray-500 text-sm md:text-base leading-relaxed">–õ–∏—Å—Ç–∞–µ—à—å –∫–∞—Ç–∞–ª–æ–≥, –Ω–∞—Ö–æ–¥–∏—à—å —Ç–æ—Ç —Å–∞–º—ã–π –±—É–∫–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–æ—Ä–≤–µ—Ç —Å–µ—Ä–¥–µ—á–∫–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è.</p>
                    </div>

                    <!-- Step 2 -->
                    <div class="bg-white border border-gray-100 p-6 md:p-8 rounded-2xl md:rounded-[2rem] hover:shadow-2xl hover:shadow-brand-pink/20 transition-all hover:-translate-y-2 group">
                        <div class="w-12 h-12 md:w-16 md:h-16 bg-gray-50 rounded-full flex items-center justify-center text-2xl md:text-3xl group-hover:bg-brand-pink group-hover:text-white group-hover:scale-110 transition-all mb-4 md:mb-6">
                            üí≥
                        </div>
                        <h3 class="font-bold text-xl md:text-2xl mb-2 md:mb-3">2. –û—Ñ–æ—Ä–º–ª—è–µ—à—å</h3>
                        <p class="text-gray-500 text-sm md:text-base leading-relaxed">–ë—ã—Å—Ç—Ä–∞—è –æ–ø–ª–∞—Ç–∞. –ú—ã —Å—Ä–∞–∑—É –≤–∏–¥–∏–º –∑–∞–∫–∞–∑ –∏ —Ñ–ª–æ—Ä–∏—Å—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç —Ç–≤–æ—Ä–∏—Ç—å –º–∞–≥–∏—é.</p>
                    </div>

                    <!-- Step 3 -->
                    <div class="bg-white border border-gray-100 p-6 md:p-8 rounded-2xl md:rounded-[2rem] hover:shadow-2xl hover:shadow-purple-200 transition-all hover:-translate-y-2 group md:col-span-2 lg:col-span-1">
                        <div class="w-12 h-12 md:w-16 md:h-16 bg-gray-50 rounded-full flex items-center justify-center text-2xl md:text-3xl group-hover:bg-purple-500 group-hover:text-white group-hover:scale-110 transition-all mb-4 md:mb-6">
                            üèéÔ∏è
                        </div>
                        <h3 class="font-bold text-xl md:text-2xl mb-2 md:mb-3">3. –ü–æ–ª—É—á–∞–µ—à—å</h3>
                        <p class="text-gray-500 text-sm md:text-base leading-relaxed">–ù–∞—à –∫—É—Ä—å–µ—Ä —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É. –≠—Ñ—Ñ–µ–∫—Ç "–í–∞—É" –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω.</p>
                    </div>
                </div>
            </section>

            <!-- CATALOG SECTION -->
            <section id="catalog" class="responsive-padding min-h-[400px] md:min-h-[600px]">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 md:mb-12 gap-4">
                    <h2 class="font-display font-black text-4xl md:text-5xl lg:text-6xl">–í–ò–¢–†–ò–ù–ê</h2>
                    <div class="flex flex-col md:flex-row gap-4 w-full md:w-auto">
                        <div class="flex gap-2 overflow-x-auto pb-2 w-full md:w-auto">
                            <button onclick="sortProducts('all')" id="filter-all" class="px-4 md:px-6 py-2 rounded-full border border-black bg-black text-white font-bold text-sm whitespace-nowrap">–í—Å–µ</button>
                            <button onclick="sortProducts('price-low')" id="filter-price-low" class="px-4 md:px-6 py-2 rounded-full border border-gray-200 hover:border-black font-bold text-sm transition-colors whitespace-nowrap">–¶–µ–Ω–∞ ‚Üë</button>
                            <button onclick="sortProducts('price-high')" id="filter-price-high" class="px-4 md:px-6 py-2 rounded-full border border-gray-200 hover:border-black font-bold text-sm transition-colors whitespace-nowrap">–¶–µ–Ω–∞ ‚Üì</button>
                            <button onclick="sortProducts('in-stock')" id="filter-in-stock" class="px-4 md:px-6 py-2 rounded-full border border-gray-200 hover:border-black font-bold text-sm transition-colors whitespace-nowrap">–í –Ω–∞–ª–∏—á–∏–∏</button>
                        </div>
                        <div class="relative">
                            <select id="sort-select" onchange="handleSortSelect(this.value)" class="w-full md:w-auto px-4 md:px-6 py-2 rounded-full border border-gray-200 font-bold text-sm bg-white focus:outline-none focus:ring-2 focus:ring-brand-pink cursor-pointer appearance-none pr-8">
                                <option value="default">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>
                                <option value="name-asc">–ü–æ –∏–º–µ–Ω–∏ (–ê-–Ø)</option>
                                <option value="name-desc">–ü–æ –∏–º–µ–Ω–∏ (–Ø-–ê)</option>
                                <option value="price-asc">–¶–µ–Ω–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>
                                <option value="price-desc">–¶–µ–Ω–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é</option>
                                <option value="stock">–í –Ω–∞–ª–∏—á–∏–∏</option>
                                <option value="new">–ù–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞</option>
                            </select>
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none">
                                <i class="fa-solid fa-chevron-down text-xs text-gray-400"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Grid -->
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6">
                    <!-- Items rendered via JS -->
                </div>
            </section>

             <!-- FOOTER -->
             <footer class="mt-12 md:mt-20 border-t border-gray-100 py-8 md:py-12 text-center text-gray-400 responsive-padding">
                <p class="font-display font-bold text-xl md:text-2xl mb-2 text-black">FLWR.</p>
                <p class="text-sm md:text-base">&copy; 2024 Design by Pixso AI. All vibes reserved.</p>
            </footer>
        </div>

        <!-- VIEW: ADMIN PANEL (Hidden by default) -->
        <div id="view-admin" class="hidden content-z p-4 md:p-6 lg:p-12 bg-gray-50 min-h-screen">
            <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 md:mb-10 gap-4">
                <div>
                    <h2 class="text-2xl md:text-3xl lg:text-4xl font-black mb-2">üíé –ê–¥–º–∏–Ω–∫–∞</h2>
                    <p class="text-gray-500 text-sm md:text-base">–£–ø—Ä–∞–≤–ª—è–π –∫—Ä–∞—Å–æ—Ç–æ–π –∑–¥–µ—Å—å</p>
                </div>
                <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto">
                    <button onclick="openAddModal()" class="bg-brand-lime text-black border-2 border-black px-4 md:px-6 py-3 rounded-xl font-bold hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all text-sm md:text-base">
                        + –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
                    </button>
                    <button onclick="logout()" class="bg-white text-red-500 border border-red-200 px-4 md:px-6 py-3 rounded-xl font-bold hover:bg-red-50 text-sm md:text-base">
                        –í—ã–π—Ç–∏
                    </button>
                </div>
            </header>

            <div class="bg-white rounded-2xl md:rounded-3xl p-4 md:p-6 lg:p-8 shadow-sm overflow-x-auto">
                <table class="w-full text-left border-collapse min-w-[600px]">
                    <thead>
                        <tr class="text-gray-400 text-xs md:text-sm uppercase border-b border-gray-100">
                            <th class="pb-3 md:pb-4 font-bold">–§–æ—Ç–æ</th>
                            <th class="pb-3 md:pb-4 font-bold">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th class="pb-3 md:pb-4 font-bold">–¶–µ–Ω–∞ (‚ÇΩ)</th>
                            <th class="pb-3 md:pb-4 font-bold">–°—Ç–∞—Ç—É—Å</th>
                            <th class="pb-3 md:pb-4 font-bold text-right">–î–µ–π—Å—Ç–≤–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody id="admin-table-body" class="text-base md:text-lg">
                        <!-- Admin rows render here -->
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <!-- MODAL: LOGIN -->
    <div id="modal-login" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 backdrop-blur-sm px-4">
        <div class="bg-white p-6 md:p-8 rounded-2xl md:rounded-3xl w-full max-w-[400px] text-center shadow-2xl scale-100 animate-[fadeIn_0.2s_ease-out]">
            <div class="w-12 h-12 md:w-16 md:h-16 bg-black text-white rounded-full mx-auto flex items-center justify-center text-xl md:text-2xl mb-4">üîí</div>
            <h3 class="font-bold text-xl md:text-2xl mb-2">–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∑–æ–Ω–∞</h3>
            <p class="text-gray-500 mb-4 md:mb-6 text-xs md:text-sm">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
            <input type="password" id="password-input" placeholder="–ü–∞—Ä–æ–ª—å..." class="w-full bg-gray-100 rounded-xl px-4 py-3 font-bold text-center outline-none focus:ring-2 focus:ring-brand-pink mb-4 text-sm md:text-base">
            <button onclick="performLogin()" class="w-full bg-brand-pink text-white font-bold py-3 rounded-xl hover:bg-pink-600 transition-colors text-sm md:text-base">–í–æ–π—Ç–∏</button>
            <button onclick="closeModal('modal-login')" class="mt-4 text-xs md:text-sm text-gray-400 font-bold hover:text-black">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- MODAL: ADD PRODUCT -->
    <div id="modal-add" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 backdrop-blur-sm px-4">
        <div class="bg-white p-6 md:p-8 rounded-2xl md:rounded-3xl w-full max-w-[500px] shadow-2xl animate-[fadeIn_0.2s_ease-out] max-h-[90vh] overflow-y-auto">
            <h3 class="font-bold text-xl md:text-2xl mb-4 md:mb-6">–ù–æ–≤—ã–π —Ü–≤–µ—Ç–æ–∫ üå∑</h3>
            <div class="space-y-3 md:space-y-4">
                <div>
                    <label class="block text-xs font-bold uppercase text-gray-500 mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input id="new-name" type="text" class="w-full border-2 border-gray-100 rounded-xl px-4 py-2 font-bold focus:border-black outline-none text-sm md:text-base">
                </div>
                <div>
                    <label class="block text-xs font-bold uppercase text-gray-500 mb-1">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                    <input id="new-price" type="number" class="w-full border-2 border-gray-100 rounded-xl px-4 py-2 font-bold focus:border-black outline-none text-sm md:text-base">
                </div>
                <div>
                    <label class="block text-xs font-bold uppercase text-gray-500 mb-1">–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ</label>
                    <input id="new-img" type="text" placeholder="https://unsplash.com/..." class="w-full border-2 border-gray-100 rounded-xl px-4 py-2 text-xs md:text-sm focus:border-black outline-none">
                </div>
                <div class="pt-3 md:pt-4 flex flex-col sm:flex-row gap-3">
                    <button onclick="addProduct()" class="flex-1 bg-brand-lime text-black font-bold py-3 rounded-xl hover:brightness-95 border-2 border-transparent hover:border-black transition-all text-sm md:text-base">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button onclick="closeModal('modal-add')" class="flex-1 bg-gray-100 text-black font-bold py-3 rounded-xl hover:bg-gray-200 text-sm md:text-base">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: CART -->
    <div id="modal-cart" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 backdrop-blur-sm px-4">
        <div class="bg-white p-4 md:p-6 lg:p-8 rounded-2xl md:rounded-3xl w-full max-w-[600px] max-h-[80vh] overflow-hidden flex flex-col shadow-2xl animate-[fadeIn_0.2s_ease-out]">
            <div class="flex justify-between items-center mb-4 md:mb-6">
                <div>
                    <h3 class="font-bold text-xl md:text-2xl">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h3>
                    <p id="cart-summary" class="text-gray-500 text-xs md:text-sm">–¢–æ–≤–∞—Ä–æ–≤: 0 | –°—É–º–º–∞: 0‚ÇΩ</p>
                </div>
                <button onclick="closeModal('modal-cart')" class="text-gray-400 hover:text-black text-xl">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            
            <div id="cart-items-container" class="flex-1 overflow-y-auto pr-2 mb-4 md:mb-6">
                <!-- Cart items will be rendered here -->
                <div id="cart-empty" class="text-center py-8 md:py-12">
                    <div class="text-4xl md:text-6xl mb-4 opacity-20">üõí</div>
                    <p class="text-gray-400 font-bold text-base md:text-lg">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                    <p class="text-gray-300 text-xs md:text-sm mt-2">–î–æ–±–∞–≤—å—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
                </div>
            </div>
            
            <div class="border-t border-gray-100 pt-4 md:pt-6">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 md:mb-6 gap-4">
                    <div>
                        <p class="text-gray-500 text-xs md:text-sm">–ò—Ç–æ–≥–æ:</p>
                        <p id="cart-total" class="font-display font-bold text-2xl md:text-3xl">0‚ÇΩ</p>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
                        <button onclick="clearCart()" class="px-4 md:px-6 py-2 md:py-3 rounded-xl border border-gray-200 font-bold text-xs md:text-sm hover:bg-gray-50">
                            –û—á–∏—Å—Ç–∏—Ç—å
                        </button>
                        <button onclick="checkout()" id="checkout-btn" class="px-4 md:px-8 py-2 md:py-3 rounded-xl bg-brand-pink text-white font-bold hover:bg-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-xs md:text-sm" disabled>
                            –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                        </button>
                    </div>
                </div>
                <p class="text-gray-400 text-xs text-center">–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5000‚ÇΩ</p>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        let products = [
            { id: 1, name: "Neon Love", price: 3500, inStock: true, image: "https://main-cdn.sbermegamarket.ru/big2/hlr-system/683/847/952/101/813/22/600022420306b1.jpg" },
            { id: 2, name: "White Dream", price: 2800, inStock: true, image: "https://avatars.mds.yandex.net/get-mpic/3584542/img_id2765813011353444423.jpeg/orig" },
            { id: 3, name: "Acid Mix", price: 4200, inStock: false, image: "https://ir.ozone.ru/s3/multimedia-1-2/7248051002.jpg" },
            { id: 4, name: "Pink Punk", price: 5100, inStock: true, image: "https://i.pinimg.com/originals/02/2f/66/022f66a2c3fa10c55172bdbeded5b8c9.jpg" },
            { id: 5, name: "Sunset Glow", price: 3200, inStock: true, image: "https://images.unsplash.com/photo-1559253664-ca249d4608c6?q=80&w=1000" },
            { id: 6, name: "Midnight Blue", price: 4800, inStock: true, image: "https://images.unsplash.com/photo-1530103862676-de8c9debad1d?q=80&w=1000" },
            { id: 7, name: "Golden Rose", price: 3900, inStock: false, image: "https://images.unsplash.com/photo-1519378058457-4c29a0a2efac?q=80&w=1000" },
            { id: 8, name: "Purple Rain", price: 4500, inStock: true, image: "https://images.unsplash.com/photo-1560701245-9b7a43c7c38d?q=80&w=1000" },
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        let currentSort = 'default';
        let filteredProducts = [...products];

        // –ö–æ—Ä–∑–∏–Ω–∞
        let cart = JSON.parse(localStorage.getItem('flower-shop-cart')) || [];

        const adminPass = "admin";
        let isAdmin = false;

        // --- –£–°–ö–û–†–ï–ù–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
        document.addEventListener('DOMContentLoaded', () => {
            renderBgEffect();
            
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loader').remove();
                    renderShop();
                    updateCartUI();
                }, 300);
            }, 500);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                document.body.classList.add('touch-device');
            }
        });

        // --- –§–£–ù–ö–¶–ò–ò –°–û–†–¢–ò–†–û–í–ö–ò ---
        function sortProducts(sortType) {
            currentSort = sortType;
            updateFilterButtons(sortType);
            
            let sortedProducts = [...products];
            
            switch(sortType) {
                case 'all':
                    filteredProducts = [...products];
                    break;
                    
                case 'price-low':
                    filteredProducts = sortedProducts.sort((a, b) => a.price - b.price);
                    break;
                    
                case 'price-high':
                    filteredProducts = sortedProducts.sort((a, b) => b.price - a.price);
                    break;
                    
                case 'in-stock':
                    filteredProducts = sortedProducts.filter(product => product.inStock);
                    break;
                    
                default:
                    filteredProducts = [...products];
            }
            
            renderShop();
        }

        function handleSortSelect(value) {
            let sortedProducts = [...products];
            
            switch(value) {
                case 'name-asc':
                    filteredProducts = sortedProducts.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                    
                case 'name-desc':
                    filteredProducts = sortedProducts.sort((a, b) => b.name.localeCompare(a.name));
                    break;
                    
                case 'price-asc':
                    filteredProducts = sortedProducts.sort((a, b) => a.price - b.price);
                    updateFilterButtons('price-low');
                    break;
                    
                case 'price-desc':
                    filteredProducts = sortedProducts.sort((a, b) => b.price - a.price);
                    updateFilterButtons('price-high');
                    break;
                    
                case 'stock':
                    filteredProducts = sortedProducts.filter(product => product.inStock);
                    updateFilterButtons('in-stock');
                    break;
                    
                case 'new':
                    filteredProducts = [...products]; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–æ–≤—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–≤—ã–º–∏
                    updateFilterButtons('all');
                    break;
                    
                default:
                    filteredProducts = [...products];
                    updateFilterButtons('all');
            }
            
            // –°–±—Ä–æ—Å–∏—Ç—å —Å–µ–ª–µ–∫—Ç –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
            document.getElementById('sort-select').value = 'default';
            
            renderShop();
        }

        function updateFilterButtons(activeFilter) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('#catalog button').forEach(btn => {
                btn.classList.remove('border-black', 'bg-black', 'text-white');
                btn.classList.add('border-gray-200', 'hover:border-black');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
            const activeButton = document.getElementById(`filter-${activeFilter}`);
            if (activeButton) {
                activeButton.classList.add('border-black', 'bg-black', 'text-white');
                activeButton.classList.remove('border-gray-200', 'hover:border-black');
            }
        }

        // --- –ú–û–ë–ò–õ–¨–ù–û–ï –ú–ï–ù–Æ ---
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const burger = document.getElementById('burger-btn');
            menu.classList.toggle('open');
            burger.classList.toggle('active');
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª –Ω–∞ body
            document.body.style.overflow = menu.classList.contains('open') ? 'hidden' : '';
        }

        function closeMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const burger = document.getElementById('burger-btn');
            menu.classList.remove('open');
            burger.classList.remove('active');
            document.body.style.overflow = '';
        }

        // --- RENDER VISUALS (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö) ---
        function renderBgEffect() {
            const container = document.getElementById('falling-bg-container');
            container.classList.add('bg-falling-container');
            const items = ['üå∏', 'üå∫', 'üåπ', 'ü™∑', 'üíê', 'üå∑', 'üíÆ', "‚ù§Ô∏è"];
            
            container.innerHTML = '';
            
            // –ú–µ–Ω—å—à–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
            const elementCount = window.innerWidth < 768 ? 8 : 12;
            
            for(let i=0; i<elementCount; i++) {
                const el = document.createElement('div');
                el.innerText = items[Math.floor(Math.random() * items.length)];
                el.classList.add('falling-element');
                
                // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
                const speed = window.innerWidth < 768 ? 
                    (2 + Math.random() * 2) : (3 + Math.random() * 3);
                
                el.style.left = Math.random() * 100 + '%';
                el.style.animationDuration = speed + 's';
                el.style.fontSize = (window.innerWidth < 768 ? 12 : 15 + Math.random() * 25) + 'px';
                el.style.animationDelay = Math.random() * 1 + 's';
                el.style.opacity = Math.random() * 0.3 + 0.2;
                
                container.appendChild(el);
            }
        }

        // --- RENDER SHOP ---
        function renderShop() {
            const grid = document.getElementById('product-grid');
            const isMobile = window.innerWidth < 768;
            const productsToRender = filteredProducts.length > 0 ? filteredProducts : products;
            
            grid.innerHTML = productsToRender.map(p => `
                <div class="group relative bg-white rounded-xl md:rounded-[2rem] p-3 md:p-4 border border-transparent hover:border-gray-200 hover:shadow-xl transition-all duration-300">
                    <div class="relative h-[200px] sm:h-[250px] md:h-[300px] overflow-hidden rounded-lg md:rounded-[1.5rem] bg-gray-100 mb-3 md:mb-4">
                        ${!p.inStock ? '<div class="absolute inset-0 bg-white/70 backdrop-blur-sm z-10 flex items-center justify-center font-bold text-gray-500 uppercase tracking-widest text-sm md:text-xl">Sold Out</div>' : ''}
                        
                        <img src="${p.image}" 
                             alt="${p.name}"
                             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                             loading="${isMobile ? 'lazy' : 'eager'}">
                        
                        ${p.inStock ? `
                        <button onclick="addToCart(${p.id})" class="absolute bottom-3 md:bottom-4 right-3 md:right-4 bg-white text-black w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center shadow-md translate-y-20 group-hover:translate-y-0 transition-transform hover:bg-brand-pink hover:text-white text-sm md:text-base">
                            <i class="fa-solid fa-plus"></i>
                        </button>` : ''}
                    </div>
                    <div class="px-1 md:px-2 pb-1 md:pb-2">
                        <div class="flex justify-between items-start mb-1">
                            <h3 class="font-bold text-base md:text-xl leading-tight truncate pr-2">${p.name}</h3>
                            <span class="font-display font-bold text-base md:text-lg text-brand-pink whitespace-nowrap">${p.price}‚ÇΩ</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-xs text-gray-400 font-medium uppercase tracking-wide">${p.inStock ? '–í –Ω–∞–ª–∏—á–∏–∏' : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}</p>
                            ${!p.inStock ? '<span class="text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full">–†–∞—Å–ø—Ä–æ–¥–∞–Ω–æ</span>' : ''}
                        </div>
                    </div>
                </div>
            `).join('');
            
            // –ï—Å–ª–∏ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
            if (productsToRender.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-6xl mb-4 opacity-20">üåø</div>
                        <p class="text-gray-400 font-bold text-lg mb-2">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                        <p class="text-gray-300 text-sm">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
                        <button onclick="sortProducts('all')" class="mt-4 px-6 py-2 rounded-full bg-black text-white font-bold hover:bg-brand-pink transition-colors">
                            –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
                        </button>
                    </div>
                `;
            }
        }

        // --- –ö–û–†–ó–ò–ù–ê –§–£–ù–ö–¶–ò–ò ---
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || !product.inStock) return;
            
            const existingItem = cart.find(item => item.productId === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    productId,
                    quantity: 1,
                    name: product.name,
                    price: product.price,
                    image: product.image
                });
            }
            
            localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
            updateCartUI();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            const cartIcon = document.getElementById('cart-count');
            cartIcon.classList.add('bounce-animation');
            setTimeout(() => cartIcon.classList.remove('bounce-animation'), 300);
            
            showNotification(`"${product.name}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É`);
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ
            closeMobileMenu();
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.productId !== productId);
            localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
            updateCartUI();
            showNotification("–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã");
        }

        function updateCartQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                removeFromCart(productId);
                return;
            }
            
            const item = cart.find(item => item.productId === productId);
            if (item) {
                item.quantity = parseInt(newQuantity);
                localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
                updateCartUI();
            }
        }

        function clearCart() {
            if (cart.length === 0) return;
            
            if (confirm("–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∫–æ—Ä–∑–∏–Ω—É?")) {
                cart = [];
                localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
                updateCartUI();
                showNotification("–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞");
            }
        }

        function updateCartUI() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartCount = document.getElementById('cart-count');
            cartCount.textContent = totalItems;
            
            renderCartItems();
            
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const cartTotal = document.getElementById('cart-total');
            const cartSummary = document.getElementById('cart-summary');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            cartTotal.textContent = `${totalPrice}‚ÇΩ`;
            cartSummary.textContent = `–¢–æ–≤–∞—Ä–æ–≤: ${totalItems} | –°—É–º–º–∞: ${totalPrice}‚ÇΩ`;
            checkoutBtn.disabled = totalItems === 0;
        }

        function renderCartItems() {
            const container = document.getElementById('cart-items-container');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div id="cart-empty" class="text-center py-8 md:py-12">
                        <div class="text-4xl md:text-6xl mb-4 opacity-20">üõí</div>
                        <p class="text-gray-400 font-bold text-base md:text-lg">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                        <p class="text-gray-300 text-xs md:text-sm mt-2">–î–æ–±–∞–≤—å—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = cart.map(item => {
                const isMobile = window.innerWidth < 768;
                return `
                    <div class="flex items-center gap-3 md:gap-4 mb-3 md:mb-4 p-3 md:p-4 rounded-xl md:rounded-2xl bg-gray-50 hover:bg-gray-100 transition-colors">
                        <img src="${item.image}" class="w-12 h-12 md:w-16 md:h-16 rounded-lg md:rounded-xl object-cover">
                        <div class="flex-1 min-w-0">
                            <h4 class="font-bold text-sm md:text-base truncate">${item.name}</h4>
                            <p class="text-brand-pink font-bold text-xs md:text-sm">${item.price}‚ÇΩ √ó ${item.quantity} = ${item.price * item.quantity}‚ÇΩ</p>
                        </div>
                        <div class="flex items-center gap-1 md:gap-2">
                            <button onclick="updateCartQuantity(${item.productId}, ${item.quantity - 1})" class="w-6 h-6 md:w-8 md:h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-xs">
                                <i class="fa-solid fa-minus"></i>
                            </button>
                            <span class="w-6 md:w-8 text-center font-bold text-sm md:text-base">${item.quantity}</span>
                            <button onclick="updateCartQuantity(${item.productId}, ${item.quantity + 1})" class="w-6 h-6 md:w-8 md:h-8 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-xs">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                            <button onclick="removeFromCart(${item.productId})" class="ml-1 md:ml-2 text-gray-400 hover:text-red-500 text-sm md:text-base">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function openCartModal() {
            updateCartUI();
            closeMobileMenu();
            document.getElementById('modal-cart').classList.remove('hidden');
            document.getElementById('modal-cart').classList.add('flex');
        }

        function checkout() {
            if (cart.length === 0) return;
            
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            alert(`–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!\n\n–¢–æ–≤–∞—Ä–æ–≤: ${totalItems}\n–û–±—â–∞—è —Å—É–º–º–∞: ${totalPrice}‚ÇΩ\n\n–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑! –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.`);
            
            cart = [];
            localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
            updateCartUI();
            closeModal('modal-cart');
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 md:top-6 right-4 md:right-6 bg-black text-white px-4 md:px-6 py-2 md:py-3 rounded-xl font-bold z-50 animate-[fadeIn_0.3s_ease-out] flex items-center gap-2 md:gap-3 text-xs md:text-sm max-w-[90vw]';
            notification.innerHTML = `
                <i class="fa-solid fa-check-circle text-brand-lime"></i>
                <span class="truncate">${message}</span>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100px)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // --- ADMIN FUNCTIONS ---
        function renderAdminTable() {
            const tbody = document.getElementById('admin-table-body');
            const isMobile = window.innerWidth < 768;
            
            tbody.innerHTML = products.map(p => `
                <tr class="border-b border-gray-50 hover:bg-gray-50 transition-colors">
                    <td class="py-3 md:py-4 pr-2 md:pr-4">
                        <img src="${p.image}" class="w-12 h-12 md:w-16 md:h-16 rounded-lg object-cover bg-gray-200">
                    </td>
                    <td class="py-3 md:py-4 font-bold text-sm md:text-base">${p.name}</td>
                    <td class="py-3 md:py-4">
                        <div class="bg-white border border-gray-200 rounded-lg px-2 md:px-3 py-1 inline-block w-16 md:w-24">
                            <input onchange="updateProduct(${p.id}, 'price', this.value)" type="number" value="${p.price}" class="w-full text-center outline-none font-medium text-sm md:text-base">
                        </div>
                    </td>
                    <td class="py-3 md:py-4">
                        <button onclick="toggleStock(${p.id})" class="px-2 md:px-3 py-1 rounded-md text-xs font-bold uppercase tracking-wide transition-colors ${p.inStock ? 'bg-green-100 text-green-700 hover:bg-green-200' : 'bg-red-100 text-red-600 hover:bg-red-200'}">
                            ${p.inStock ? '–í –Ω–∞–ª–∏—á–∏–∏' : '–ù–µ—Ç'}
                        </button>
                    </td>
                    <td class="py-3 md:py-4 text-right">
                        <button onclick="deleteProduct(${p.id})" class="text-gray-400 hover:text-red-500 transition-colors p-1 md:p-2">
                            <i class="fa-solid fa-trash text-sm md:text-base"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function checkAdmin() {
            if(isAdmin) {
                switchView('admin');
            } else {
                document.getElementById('modal-login').classList.remove('hidden');
                document.getElementById('modal-login').classList.add('flex');
            }
            closeMobileMenu();
        }

        function performLogin() {
            const val = document.getElementById('password-input').value;
            if(val === adminPass) {
                isAdmin = true;
                closeModal('modal-login');
                document.getElementById('password-input').value = '';
                document.getElementById('admin-btn').classList.add('bg-black', 'text-white');
                switchView('admin');
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
            }
        }

        function logout() {
            isAdmin = false;
            document.getElementById('admin-btn').classList.remove('bg-black', 'text-white');
            switchView('home');
        }

        function switchView(viewName) {
            const shop = document.getElementById('view-shop');
            const admin = document.getElementById('view-admin');
            const bg = document.getElementById('falling-bg-container');
            
            window.scrollTo(0,0);
            closeMobileMenu();

            if(viewName === 'admin') {
                shop.classList.add('hidden');
                admin.classList.remove('hidden');
                bg.style.display = 'none';
                renderAdminTable();
            } else {
                shop.classList.remove('hidden');
                admin.classList.add('hidden');
                bg.style.display = 'block';
                renderBgEffect();
                renderShop();
            }
        }

        // CRUD
        function updateProduct(id, field, val) {
            const p = products.find(x => x.id === id);
            if(p) {
                if(field === 'price') p.price = parseInt(val);
                renderShop();
                const cartItem = cart.find(item => item.productId === id);
                if (cartItem) {
                    cartItem.price = p.price;
                    localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
                    updateCartUI();
                }
            }
        }

        function toggleStock(id) {
            const p = products.find(x => x.id === id);
            if(p) {
                p.inStock = !p.inStock;
                renderAdminTable();
                renderShop();
                
                if (!p.inStock) {
                    cart = cart.filter(item => item.productId !== id);
                    localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
                    updateCartUI();
                }
            }
        }

        function deleteProduct(id) {
            if(confirm('–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?')) {
                products = products.filter(x => x.id !== id);
                cart = cart.filter(item => item.productId !== id);
                localStorage.setItem('flower-shop-cart', JSON.stringify(cart));
                updateCartUI();
                renderAdminTable();
            }
        }

        function addProduct() {
            const name = document.getElementById('new-name').value;
            const price = document.getElementById('new-price').value;
            let img = document.getElementById('new-img').value;

            if(!name || !price) return alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ');
            if(!img) img = 'https://source.unsplash.com/random/400x400/?flowers'; 

            const newProduct = {
                id: Date.now(),
                name,
                price: parseInt(price),
                inStock: true,
                image: img
            };
            
            products.push(newProduct);
            filteredProducts = [...products]; // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
            
            closeModal('modal-add');
            renderAdminTable();
            renderShop();
        }

        // UTILS
        function openAddModal() {
            document.getElementById('modal-add').classList.remove('hidden');
            document.getElementById('modal-add').classList.add('flex');
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
            document.getElementById(id).classList.remove('flex');
        }

        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', () => {
            renderShop();
            renderBgEffect();
            if (document.getElementById('view-admin').classList.contains('hidden') === false) {
                renderAdminTable();
            }
            updateCartUI();
        });

        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è —è–∫–æ—Ä–µ–π
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                    closeMobileMenu();
                }
            });
        });

    </script>
</body>
</html>